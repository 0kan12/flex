<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Creative Store</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #abbccd;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }

        .container {
            max-width: 1100px;
            background-color: #ffff;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.25);
            padding: 20px;
            margin: 10px;
            margin-top: 80px;
        }

        .logo {
            height: 50px;
            width: auto;
            position: absolute;
            top: 10px;
            left: 10px;
            margin: 10px;
            transition: transform 0.3s ease, box-shadow 0.3s ease, background-color 0.3s ease;
        }

        .logo:hover {
            transform: scale(1.05);
            transition: 0.3s;
        }

        .basliklar h2 {
            font-family: Arial, Helvetica, sans-serif;
            margin-top: 10px;
            margin-bottom: 10px;
            margin-left: 10px;
            text-shadow: 2px 4px 6px rgba(0, 0, 0, 0.25);
            border-radius: 5px;
        }

        .stats {
            display: flex;
            flex-wrap: nowrap;
            justify-content: space-between;
            margin-bottom: 30px;
        }

        .stat-box {
            background-color: #eaeaea;
            border-radius: 10px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.5);
            padding: 20px;
            text-align: center;
            flex: 1 1 calc(50% - 20px);
            margin: 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
            transition: transform 0.3s ease, box-shadow 0.3s ease, background-color 0.3s ease;
        }

        .stat-box:hover {
            transform: scale(1.05) rotate(2deg);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5), inset 0 0 10px rgba(0, 0, 0, 0.2);
            background-color: #ffffff;
            transition: 0.3s;
        }

        .stat-box h2 {
            font-size: 18px;
            margin: 0;
            margin-bottom: 10px;
        }

        .stat-box p {
            font-size: 24px;
            margin: 0;
        }

        .icon-container {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .iconlogo {
            height: 30px;
            width: 30px;
            margin-right: 10px;
        }

        .best-selling {
            display: flex;
            flex-wrap: nowrap;
            justify-content: space-between;
            margin-bottom: 15px;
        }

        .product {
            background-color: #e9e9e9;
            border-radius: 10px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.5);
            padding: 10px;
            text-align: center;
            flex: 1 1 calc(25% - 20px);
            margin: 10px;
            margin-bottom: 1px;
            transition: transform 0.3s ease, box-shadow 0.3s ease, background-color 0.3s ease, border-color 0.3s ease;
        }

        .product:hover {
            transform: scale(1.05);
            box-shadow: 0 12px 20px rgba(0, 0, 0, 0.4), 0 0 10px rgba(0, 0, 0, 0.2);
            background-color: #f0f0f0;
            border-color: #b3b3ff;
        }

        .product img {
            width: 100%;
            height: auto;
            border-radius: 5px;
            margin-bottom: 10px;
        }

        .product h3 {
            font-size: 16px;
            margin: 10px 0 5px 0;
        }

        .product p {
            font-size: 14px;
            margin: 5px 0;
        }

        .grafik {
            display: flex;
            justify-content: center;
        }

        .grafik img {
            max-width: 100%;
            height: auto;
        }
    </style>
    <!-- Include GSAP library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/gsap.min.js"></script>
</head>
<body>
    <a href="https://www.roblox.com/groups/33879599/Creative-Accessorys" target="_blank">
        <img src="https://cdn.imdev.lol/pictures/am.png" alt="CreativeStore Logo" class="logo">
    </a>

    <div class="container">
        <div class="basliklar"><h2>ISTATISTIKLER</h2></div>

        <div class="stats">
            <div class="stat-box">
                <h2>Bulunan Robux</h2>
                <div class="icon-container">
                    <img src="https://cdn.imdev.lol/pictures/robuxlogo.png" class="iconlogo">
                    <p id="funds" data-end="1000">0</p>
                </div>
            </div>
            <div class="stat-box">
                <h2>Toplam Pending</h2>
                <div class="icon-container">
                    <img src="https://cdn.imdev.lol/pictures/pendinglogo.png" class="iconlogo">
                    <p id="pending" data-end="500">0</p>
                </div>
            </div>
            <div class="stat-box">
                <h2>Kullanici Sayisi</h2>
                <div class="icon-container">
                    <img src="https://cdn.imdev.lol/pictures/membericon.png" class="iconlogo">
                    <p id="members" data-end="200">0</p>
                </div>
            </div>
            <div class="stat-box">
                <h2>Toplam Satis</h2>
                <div class="icon-container">
                    <img src="https://cdn.imdev.lol/pictures/salesicon.png" class="iconlogo">
                    <p id="total_sales" data-end="1500">0</p>
                </div>
            </div>
        </div>

        <div class="basliklar"><h2>BESTSELLING</h2></div>

        <div class="best-selling" id="best-selling">
            <!-- Best selling products will be loaded here -->
        </div>
    </div>
    <script>
        let previousData = {
            funds: 0,
            pending: 0,
            members: 0,
            total_sales: 0
        };

        function animateNumber(element, startValue, endValue) {
            gsap.fromTo(
                element,
                { textContent: startValue },
                {
                    textContent: endValue,
                    duration: 1,
                    ease: "linear",
                    snap: { textContent: 1 },
                    onUpdate: function() {
                        element.textContent = parseInt(this.targets()[0].textContent).toLocaleString();
                    }
                }
            );
        }

        function animateProductDetails(productElement, endValues) {
            gsap.fromTo(
                productElement.querySelector('h3'),
                { textContent: 0 },
                {
                    textContent: endValues.revenue,
                    duration: 1,
                    ease: "linear",
                    snap: { textContent: 1 },
                    onUpdate: function() {
                        productElement.querySelector('h3').textContent = parseInt(this.targets()[0].textContent).toLocaleString() + ' Robux';
                    }
                }
            );

            gsap.fromTo(
                productElement.querySelector('p:nth-of-type(1)'),
                { textContent: 0 },
                {
                    textContent: endValues.salesCount,
                    duration: 1,
                    ease: "linear",
                    snap: { textContent: 1 },
                    onUpdate: function() {
                        productElement.querySelector('p:nth-of-type(1)').textContent = this.targets()[0].textContent + ' Sales';
                    }
                }
            );

            gsap.fromTo(
                productElement.querySelector('p:nth-of-type(2)'),
                { textContent: 0 },
                {
                    textContent: endValues.fav,
                    duration: 1,
                    ease: "linear",
                    snap: { textContent: 1 },
                    onUpdate: function() {
                        productElement.querySelector('p:nth-of-type(2)').textContent = this.targets()[0].textContent + ' Favorites';
                    }
                }
            );
        }

        function initAnimations() {
            const stats = document.querySelectorAll('[id^="funds"], [id^="pending"], [id^="members"], [id^="total_sales"]');
            stats.forEach(stat => {
                const endValue = parseInt(stat.getAttribute('data-end'), 10);
                const currentValue = parseInt(stat.textContent.replace(/,/g, ''), 10) || 0;
                animateNumber(stat, currentValue, endValue);
            });
        }

        function updateData() {
            fetch('https://selective-absorbing-soda.glitch.me/data')
                .then(response => response.json())
                .then(data => {
                    document.getElementById('funds').setAttribute('data-end', data.funds);
                    document.getElementById('pending').setAttribute('data-end', data.pending);
                    document.getElementById('members').setAttribute('data-end', data.members);
                    document.getElementById('total_sales').setAttribute('data-end', data.total_sales);

                    // Update and animate stats
                    const stats = document.querySelectorAll('[id^="funds"], [id^="pending"], [id^="members"], [id^="total_sales"]');
                    stats.forEach(stat => {
                        const endValue = parseInt(stat.getAttribute('data-end'), 10);
                        const currentValue = previousData[stat.id] || 0;
                        animateNumber(stat, currentValue, endValue);
                        previousData[stat.id] = endValue;
                    });

                    // Update best-selling products
                    const bestSellingContainer = document.getElementById('best-selling');
                    bestSellingContainer.innerHTML = '';
                    data.best_selling.forEach(item => {
                        const productElement = document.createElement('div');
                        productElement.className = 'product';
                        productElement.onclick = () => window.location.href = `https://roblox.com/catalog/${item.targetId}`;
                        productElement.innerHTML = `
                            <img src="${item.img}" alt="Product photo">
                            <h4>${item.name}</h4>
                            <h3>${item.revenue} Robux</h3>
                            <p>${item.salesCount} Sales</p>
                            <p>${item.fav} Favorites</p>
                        `;
                        bestSellingContainer.appendChild(productElement);

                        // Animate product details
                        animateProductDetails(productElement, {
                            revenue: item.revenue,
                            salesCount: item.salesCount,
                            fav: item.fav
                        });
                    });
                })
                .catch(error => console.error('Error fetching data:', error));
        }

        // Initial data fetch
        document.addEventListener('DOMContentLoaded', () => {
            updateData();
            setInterval(updateData, 30000);
        });
    </script>
</body>
</html>
